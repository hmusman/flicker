 "use strict";

function sa_img(t, e) {
    swal({
        title: t,
        html: e,
        type: "success",
        confirmButtonText: "Okay"
    }).catch(swal.noop)
}

function update_cart_item(t, e) {
	
	
    $.ajax({
        url: t,
        type: "POST",
        data: e,
        success: function(t) {
			
			if(t.error == "1"){
				
				d_alert("",t.message)
			}else{
				
				t.cart && (cart = t.cart, update_mini_cart(cart), update_cart(cart)), sa_alert(t.status, t.message)
			}
        },
        error: function(t) {
			console.log(t);
            sa_alert("Error!", "Ajax call failed, please try again or contact site owner.", "error", !0)
        }
    })
}


    function addProductNotice(title, thumb, text, type) {
        $.jGrowl.defaults.closer = false;
        //Stop jGrowl
        //$.jGrowl.defaults.sticky = true;
        var tpl = thumb + '<h3>'+text+'</h3>';
        $.jGrowl(tpl, {     
            life: 4000,
            header: title,
            speed: 'slow',
            theme: type
        });
    }

function sticky_con() {
    get_width() > 767 ? ($("#sticky-con").stick_in_parent({
        parent: $(".container")
    }), $("#sticky-con").on("sticky_kit:bottom", function(t) {
        $(this).parent().css("position", "static")
    }).on("sticky_kit:unbottom", function(t) {
        $(this).parent().css("position", "relative")
    })) : $("#sticky-con").trigger("sticky_kit:detach")
}

function sticky_footer() {
    $("body").css("padding-bottom", $(".footer").height())
}

function get_width() {
    return $(window).width()
}

function loading(t) {
    $("#loading").show(), setTimeout(function() {
        $("#loading").hide()
    }, t)
}

function get(t) {
    return "undefined" != typeof Storage ? localStorage.getItem(t) : void alert("Please use a modern browser as this site needs localstroage!")
}

function store(t, e) {
    "undefined" != typeof Storage ? localStorage.setItem(t, e) : alert("Please use a modern browser as this site needs localstroage!")
}

function remove(t) {
    "undefined" != typeof Storage ? localStorage.removeItem(t) : alert("Please use a modern browser as this site needs localstroage!")
}

function gen_html(t) {

    var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    var e = "";
    if (get_width() > 992) var s = get("shop_grid"),
        a = ".three-col" == s ? 3 : 2;
    else var s = ".two-col",
        a = 2;
    var i = s && ".three-col" == s ? "col-sm-6 col-md-4 col-xs-6" : "col-md-6",
        o = s && ".three-col" == s ? "alt" : "";


    if (t || (e += "<h4>No product found, please try to search or filter again.</h4>"), 1 == site.settings.products_page && ($("#results").empty(), $(".grid").isotope("destroy").isotope()), $.each(t, function(s, r)
        {
			
            var n = r.price;
            var t = r.name;
            var count = 22;

            var t = t.slice(0, count) + (t.length > count ? "..." : "");
           // 1 != site.settings.products_page && (0 === s && (e += '<div class="row">'), s % a === 0 && (e += '</div><div class="product-layout col-md-4 col-sm-6 col-xs-12">')), e += '<div class="product-item-container">\n        <div class="product ' + o + " " + (1 == site.settings.products_page ? "grid-sizer" : "") + '">\n        <div class="product-top">\n        <div class="product-image">\n        <a href="' + site.site_url + "product/" + r.slug + '">\n        <img class="img-responsive" src="' + site.base_url + "assets/uploads/" + r.image + '" alt=""/>\n        </a>\n        </div>\n        <div class="product-desc">\n        <a href="' + site.site_url + "product/" + r.slug + '">\n        <h2 class="product-name">' + r.name + "</h2>\n        </a>\n        <p style='display:none'>" + r.details + '</p>\n        </div>\n        </div>\n        <div class="clearfix"></div>\n        <div class="product-bottom">\n        <div class="product-price">\n        ' + n + '\n        </div>\n        <div class="product-rating">\n        <div class="form-group" style="margin-bottom:0;">\n        <div class="input-group">\n        <span class="input-group-addon pointer btn-minus"><span class="fa fa-minus"></span></span>\n        <input type="text" name="quantity" class="form-control text-center quantity-input" value="1" required="required">\n        <span class="input-group-addon pointer btn-plus"><span class="fa fa-plus"></span></span>\n        </div>\n        </div>\n        </div>\n        <div class="product-cart-button">\n        <div class="btn-group" role="group" aria-label="...">\n        <button class="btn btn-info add-to-wishlist" data-id="' + r.id + '"><i class="fa fa-heart-o"></i></button>\n        <button class="btn btn-theme add-to-cart" data-id="' + r.id + '"><i class="fa fa-shopping-cart padding-right-md"></i> Add to Cart</button>\n        </div>\n        </div>\n        </div>\n        <div class="clearfix"></div>\n        </div>\n        </div>', 1 != site.settings.products_page && s + 1 === t.length && (e += "</div>")
if(isMobile){

    1 != site.settings.products_page && (0 === s && (e += ''), s % a === 0 && (e += '')), e +=
        '<div class="product-layout col-xs-6" style="border:margin: 0;padding: 0;">' +
          '<div class="product-item-container">' +
            '<div class="left-block">' +
               '<div class="product-image-container">' +
                  '<a href="'+ site.site_url + "product/" + r.slug +'"><img src="' + site.base_url + "assets/uploads/" + r.image + '" class="img-responsive"/></a>' +
               '</div>' +
            '</div>' +
          '<div class="right-block">' +
           '<div class="caption"><h4>' +
              '<a href="' + site.site_url + "product/" + r.slug + '">'+t+'</a></h4>' +
              '<div class="description"><p>'+r.details+' </p></div>' +
              '<div class="price"><span class="price-new">'+r.price+'</span></div>' +
              '<div class="button-group">' +
              '<button type="button" data-toggle="tooltip" class="addToCart add-to-cart" data-id="'+r.id+'" title="Add to Cart"><i class="fa fa-shopping-cart"></i> ' +
              '</button>' +
              '<button class="wishlist add-to-wishlist" type="button" data-toggle="tooltip" title="Add to Wish List" data-id="'+r.id+'"><i class="fa fa-heart"></i></button>' +
           '</div>' +
        '</div></div></div></div>', 1 != site.settings.products_page && s + 1 === t.length && (e += "</div>");

}else{
    1 != site.settings.products_page && (0 === s && (e += ''), s % a === 0 && (e += '')), e +='<div class="product-layout col-md-4 col-sm-6"><div class="product-item-container"><div class="left-block"><div class="product-image-container  second_img "><img src="' + site.base_url + "assets/uploads/" + r.image + '" class="img-responsive"/></div><a class="quickview visible-lg" href="' + site.site_url + "product/" + r.slug + '"> View Detail</a></div><div class="right-block"><div class="caption"><h4><a href="' + site.site_url + "product/" + r.slug + '">'+t+'</a></h4><div class="price"><span class="price-new">'+r.price+'</span></div><div class="description item-desc hidden"><p>'+r.details+' </p></div></div><div class="button-group"><button type="button" data-toggle="tooltip" class="addToCart add-to-cart" data-id="'+r.id+'" title="Add to Cart"><i class="fa fa-shopping-cart"></i> <span class="hidden-xs">Add to Cart</span></button><button class="wishlist add-to-wishlist" type="button" data-toggle="tooltip" title="Add to Wish List" data-id="'+r.id+'"><i class="fa fa-heart"></i></button></div></div></div></div></div>', 1 != site.settings.products_page && s + 1 === t.length && (e += "</div>");

}
        }

        ), 1 != site.settings.products_page) $("#results").empty(), $(e).appendTo($("#results"));



    else {
        var r = $(e);
        $(".grid").isotope("insert", r).isotope("layout"), setTimeout(function() {
            $(".grid").isotope({
                itemSelector: ".grid-item"
            })
        }, 200)
    }
}

function searchProducts() {
	
    $("#loading").show();
    var t = {};
	t.params = {"p1":parms1,"p2":parms2,"p3":parms3};
	console.log(t);
    t[site.csrf_token] = site.csrf_token_value, t.filters = get_filters(), t.format = "json", $.ajax({
        url: site.shop_url + "search?page=" + filters.page,
        type: "POST",
        data: t,
        dataType: "json"
    }).done(function(t) {
		
        products = t.products, t.products ? (t.pagination && $("#pagination").empty().html(t.pagination), t.info && $(".page-info").empty().text(lang.page_info.replace("_page_", t.info.page).replace("_total_", t.info.total))) : ($(".page-info").empty(), $("#pagination").empty()), gen_html(products)
    }).always(function() {
        $("#loading").hide()
    }).error(function(e){
		$("body").html(e.responseText);
	})
}

function get_filters() {
    return filters.category = $("#product-category").val() ? $("#product-category").val() : filters.category, filters.min_price = $("#min-price").val(), filters.max_price = $("#max-price").val(), filters.in_stock = $("#in-stock").is(":checked") ? 1 : 0, filters.sorting = get("sorting"), filters
}

function update_mini_cart(t) {
    if (t.total_items && t.total_items > 0) {
        $(".cart-total-items").text(t.total_items), $("#cart-items").empty(), $.each(t.contents, function() {
            var t = '<td><span class="cart-item-image"><img class="img-responsive" src="' + site.base_url + "assets/uploads/thumbs/" + this.image + '" alt=""></span></td><td>' + this.name + "<br>" + this.qty + " x " + this.price + '</td><td class="text-right text-bold">' + this.subtotal + "</td>";
            $("<tr>" + t + "</tr>").appendTo("#cart-items")
        });
        var e = '\n        <tr class="text-bold"><td colspan="2">' + lang.total_items + '</td><td class="text-right">' + t.total_items + '</td></tr>\n        <tr class="text-bold"><td colspan="2">' + lang.total + '</td><td class="text-right">' + t.total + "</td></tr>\n        ";
        $("<tfoot>" + e + "</tfoot>").appendTo("#cart-items"), $("#cart-empty").hide(), $("#cart-contents").show()
    } else $(".cart-total-items").text(0), $("#cart-contents").hide(), $("#cart-empty").show()
}


function update_cart(t) {
	
    var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

    if( isMobile){

            if (t.total_items && t.total_items > 0) {
                $("#cart-table tbody").empty();
                var e = 1;
                $.each(t.contents, function() {
                    
					var t = this,
                        s = '\n            <td class="text-center">\n            <a href="#" class="text-red remove-item" data-rowid="' + this.rowid + '"><i class="fa fa-trash-o"></i><a>\n            </td>\n            <td><input type="hidden" name="' + e + '[rowid]" value="' + this.rowid + '">' + e + '</td>\n            <td style="width: 46px;height: 70px;">\n            <span class="cart-item-image"><img class="img-responsive" width="35" height="35" src="' + site.base_url + "assets/uploads/thumbs/" + this.image + '" alt=""></span>\n            </td>\n            <td>' + this.name + "</td>\n            <td align='center'>";
                    var oop = "";
					 $.each(this.options, function() {
						 if(this.id == t.option){
							 oop = this.name;
						 }
					 }); s += oop+'</td>\n            <td><input style="width:50px;" type="text" name="' + e + '[qty]" class="form-control text-center input-qty cart-item-qty" value="' + this.qty + '"></td>\n            <td class="text-center">' + this.price + '</td>\n            <td class="text-center">' + this.subtotal + "</td>\n            ", e++, $('<tr id="' + this.rowid + '">' + s + "</tr>").appendTo("#cart-table tbody")
                }), $("#cart-totals").empty();

				
                var s = "<tr><td>" + lang.total_w_o_tax + '</td><td class="text-right">' + t.subtotal + "</td></tr>";
                s += "<tr><td>" + lang.product_tax + '</td><td class="text-right">' + t.total_item_tax + "</td></tr>", s += "<tr><td>" + lang.total + '</td><td class="text-right">' + t.total + "</td></tr>", site.settings.tax2 !== !1 && (s += "<tr><td>" + lang.order_tax + '</td><td class="text-right">' + t.order_tax + "</td></tr>"), s += "<tr><td>" + lang.shipping + ' *</td><td class="text-right">' + t.shipping + "</td></tr>", s += '<tr><td colspan="2"></td></tr>', s += '<tr class="active text-bold"><td>' + lang.grand_total + '</td><td class="text-right">' + t.grand_total + "</td></tr>", $("<tbody>" + s + "</tbody>").appendTo("#cart-totals"), $("#total-items").text(t.total_items + "(" + t.total_unique_items + ")"), $(".cart-item-option").selectpicker("refresh"), $(".cart-empty-msg").hide(), $(".cart-contents").show()
            } else $("#total-items").text(t.total_items), $(".cart-contents").hide(), $(".cart-empty-msg").show()



    }else{

        if (t.total_items && t.total_items > 0) {
            $("#cart-table tbody").empty();
            var e = 1;
            $.each(t.contents, function() {
				console.log(this);
                var t = this,
                    s = '\n            <td class="text-center">\n            <a href="#" class="text-red remove-item" data-rowid="' + this.rowid + '"><i class="fa fa-trash-o"></i><a>\n            </td>\n            <td><input type="hidden" name="' + e + '[rowid]" value="' + this.rowid + '">' + e + '</td>\n            <td style="width: 46px;height: 70px;">\n            <span class="cart-item-image"><img class="img-responsive" width="35px" height="35px" src="' + site.base_url + "assets/uploads/thumbs/" + this.image + '" alt=""></span>\n            </td>\n            <td>' + this.name + "</td>\n            <td align='center'>";
                     var oop = "";
					 $.each(this.options, function() {
						 if(this.id == t.option){
							 oop = this.name;
						 }
					 });
					 s += oop+'</td>\n            <td><input type="text" name="' + e + '[qty]" class="form-control text-center input-qty cart-item-qty" value="' + this.qty + '"></td>\n            <td class="text-center">' + this.price + '</td>\n            <td class="text-center">' + this.subtotal + "</td>\n            ", e++, $('<tr id="' + this.rowid + '">' + s + "</tr>").appendTo("#cart-table tbody")
            }), $("#cart-totals").empty();
			
            var s = "<tr><td>" + lang.total_w_o_tax + '</td><td class="text-right">' + t.subtotal + "</td></tr>";
            s += "<tr><td>" + lang.product_tax + '</td><td class="text-right">' + t.total_item_tax + "</td></tr>", s += "<tr><td>" + lang.total + '</td><td class="text-right">' + t.total + "</td></tr>", site.settings.tax2 !== !1 && (s += "<tr><td>" + lang.order_tax + '</td><td class="text-right">' + t.order_tax + "</td></tr>"), s += "<tr><td>" + lang.shipping + ' *</td><td class="text-right">' + t.shipping + "</td></tr>", s += '<tr><td colspan="2"></td></tr>', s += '<tr class="active text-bold"><td>' + lang.grand_total + '</td><td class="text-right">' + t.grand_total + "</td></tr>", $("<tbody>" + s + "</tbody>").appendTo("#cart-totals"), $("#total-items").text(t.total_items + "(" + t.total_unique_items + ")"), $(".cart-item-option").selectpicker("refresh"), $(".cart-empty-msg").hide(), $(".cart-contents").show()
        } else $("#total-items").text(t.total_items), $(".cart-contents").hide(), $(".cart-empty-msg").show()

    }
}

function formatMoney(t, e) {
    return t;
	if (e || (e = site.settings.symbol), 1 == site.settings.sac) return (1 == site.settings.display_symbol ? e : "") + "" + formatSA(parseFloat(t).toFixed(site.settings.decimals)) + (2 == site.settings.display_symbol ? e : "");
    var s = accounting.formatMoney(t, e, site.settings.decimals, 0 == site.settings.thousands_sep ? " " : site.settings.thousands_sep, site.settings.decimals_sep, "%s%v");
    return (1 == site.settings.display_symbol ? e : "") + s + (2 == site.settings.display_symbol ? e : "")
}

function formatSA(t) {
	return t;
    t = t.toString();
    var e = "";
    t.indexOf(".") > 0 && (e = t.substring(t.indexOf("."), t.length)), t = Math.floor(t), t = t.toString();
    var s = t.substring(t.length - 3),
        a = t.substring(0, t.length - 3);
    "" != a && (s = "," + s);
    var i = a.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + s + e;
    return i
}

function sa_alert(t, e, s, a) {
    s = s || "success", a = a || !1, swal({
        title: t,
        html: e,
        type: s,
        timer: a ? 6e4 : 2e3,
        confirmButtonText: "Okay"
    }).catch(swal.noop)
}
function d_alert(t, e, s, a) {
    s = s || "warning", a = a || !1, swal({
        title: t,
        html: e,
        type: s,
       // timer: a ? 6e4 : 2e3,
        confirmButtonText: "Okay"
    }).catch(swal.noop)
}
function saa_alert(t, e, s, a) {
    s = s || "delete", e = e || "This action can't be reverted back.", a = a || {}, a._method = s, a[site.csrf_token] = site.csrf_token_value, swal({
        title: "Are you sure?",
        html: e,
        type: "question",
        showCancelButton: !0,
        allowOutsideClick: !1,
        showLoaderOnConfirm: !0,
        preConfirm: function() {
            return new Promise(function() {
                $.ajax({
                    url: t,
                    type: "POST",
                    data: a,
                    success: function(t) {
                        return t.redirect ? (window.location.href = t.redirect, !1) : (t.cart && (cart = t.cart, update_mini_cart(cart), update_cart(cart)), void sa_alert(t.status, t.message))
                    },
                    error: function() {
                        sa_alert("Error!", "Ajax call failed, please try again or contact site owner.", "error", !0)
                    }
                })
            })
        }
    }).catch(swal.noop)
}

function prompt(t, e, s) {
    t = t || "Reset Password", e = e || "Please type your email address", s = s || {}, s[site.csrf_token] = site.csrf_token_value, swal({
        title: t,
        html: e,
        input: "email",
        showCancelButton: !0,
        allowOutsideClick: !1,
        showLoaderOnConfirm: !0,
        confirmButtonText: lang.submit,
        preConfirm: function(t) {
            return s.email = t, new Promise(function(t, e) {
                $.ajax({
                    url: site.base_url + "forgot_password",
                    type: "POST",
                    data: s,
                    success: function(s) {
                        s.status ? t(s) : e(s)
                    },
                    error: function() {
                        sa_alert("Error!", "Ajax call failed, please try again or contact site owner.", "error", !0)
                    }
                })
            })
        }
    }).then(function(t) {
        sa_alert(t.status, t.message)
    })
}

function add_address(t) {
    t = t || {}, swal({
        title: t.id ? lang.update_address : lang.add_address,
        html: '<span class="text-bold padding-bottom-md">' + lang.fill_form + '</span><hr class="swal2-spacer padding-bottom-xs" style="display: block;"><form action="' + site.shop_url + 'address" id="address-form" class="padding-bottom-md"><input type="hidden" name="' + site.csrf_token + '" value="' + site.csrf_token_value + '"><div class="row"><div class="form-group col-sm-12"><input name="line1" id="address-line-1" value="' + (t.line1 ? t.line1 : "") + '" class="form-control" placeholder="Line 1"></div></div><div class="row"><div class="form-group col-sm-12"><input name="line2" id="address-line-2" value="' + (t.line2 ? t.line2 : "") + '" class="form-control" placeholder="Line 2"></div></div><div class="row"><div class="form-group col-sm-6"><input name="city" value="' + (t.city ? t.city : "") + '" id="address-city" class="form-control" placeholder="City"></div><div class="form-group col-sm-6"><input name="state" value="' + (t.state ? t.state : "") + '" id="address-state" class="form-control" placeholder="State"></div><div class="form-group col-sm-6"><input name="postal_code" value="' + (t.postal_code ? t.postal_code : "") + '" id="address-postal-code" class="form-control" placeholder="Postal Code"></div><div class="form-group col-sm-6"><input name="country" value="' + (t.country ? t.country : "") + '" id="address-country" class="form-control" placeholder="Country"></div><div class="form-group col-sm-12 margin-bottom-no"><input name="phone" value="' + (t.phone ? t.phone : "") + '" id="address-phone" class="form-control" placeholder="Phone"></div></form></div>',
        showCancelButton: !0,
        allowOutsideClick: !1,
        confirmButtonText: lang.submit,
        preConfirm: function() {
            return new Promise(function(t, e) {
                $("#address-line-1").val() || e("Line 1 is required"), $("#address-line-2").val() || e("Line 2 is required"), $("#address-city").val() || e("City is required"), $("#address-state").val() || e("State is required"), $("#address-postal-code").val() || e("Postal code is required"), $("#address-country").val() || e("Country is required"), $("#address-phone").val() || e("Phone is required"), t()
            })
        },
        onOpen: function() {
            $("#address-line-1").val(t.line1 ? t.line1 : "").focus()
        }
    }).then(function(e) {
        var s = $("#address-form");
        $.ajax({
            url: s.attr("action") + (t.id ? "/" + t.id : ""),
            type: "POST",
            data: s.serialize(),
            success: function(t) {
                return t.redirect ? (window.location.href = t.redirect, !1) : void sa_alert(t.status, t.message, t.level)
            },
            error: function() {
                sa_alert("Error!", "Ajax call failed, please try again or contact site owner.", "error", !0)
            }
        })
    }).catch(swal.noop)
}

function email_form() {
    swal({
        title: lang.send_email_title,
        html: '<div><span class="text-bold padding-bottom-md">' + lang.fill_form + '</span><hr class="swal2-spacer padding-bottom-xs" style="display: block;"><form action="' + site.shop_url + 'send_message" id="message-form" class="padding-bottom-md"><input type="hidden" name="' + site.csrf_token + '" value="' + site.csrf_token_value + '"><div class="row"><div class="form-group col-sm-12"><input type="text" name="name" id="form-name" value="" class="form-control" placeholder="Full Name"></div></div><div class="row"><div class="form-group col-sm-12"><input type="email" name="email" id="form-email" value="" class="form-control" placeholder="Email"></div></div><div class="row"><div class="form-group col-sm-12"><input type="text" name="subject" id="form-subject" value="" class="form-control" placeholder="Subject"></div></div><div class="row"><div class="col-sm-12"><textarea name="message" id="form-message" class="form-control" placeholder="Message" style="height:100px;"></textarea></div></div></form></div>',
        showCancelButton: !0,
        allowOutsideClick: !1,
        confirmButtonText: lang.submit,
        preConfirm: function() {
            return new Promise(function(t, e) {
                $("#form-name").val() || e("Name is required"), $("#form-email").val() || e("Email is required"), $("#form-subject").val() || e("Subject is required"), $("#form-message").val() || e("Message is required"), validateEmail($("#form-email").val()) || e("Email is invalid"), t()
            })
        },
        onOpen: function() {
            $("#form-name").focus()
        }
    }).then(function(t) {
        var e = $("#message-form");
        $.ajax({
            url: e.attr("action"),
            type: "POST",
            data: e.serialize(),
            success: function(t) {
                return t.redirect ? (window.location.href = t.redirect, !1) : void sa_alert(t.status, t.message, t.level, !0)
            },
            error: function() {
                sa_alert("Error!", "Ajax call failed, please try again or contact site owner.", "error", !0)
            }
        })
    }).catch(swal.noop)
}

function validateEmail(t) {
    var e = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return e.test(t)
}
$(function() {
    if ($(document).on("click", ".add-to-cart", function(t) {
        
            t.preventDefault();
            var e = $(this).attr("data-id"),
                s = $(".shopping-cart:visible"),
                a = $(this).parents(".product-bottom").find(".quantity-input"),
                i = $(this).parents(".product").find("img").eq(0);
        
		// console.log(e);
		// alert('test');
          $.ajax({
            url: site.site_url + "cart/add/" + e,
            type: "GET",
            dataType: "json",
            data: {
                qty: a.val()
            }
        }).done(function (t) {
            if(t.error){

                sa_alert("Error!", t.message, "error", !0);

            }else{
                s = t, update_mini_cart(t);
                sa_alert("Success!",'Product added to Cart successfully' , "success", 0);
                //sa_alert("success!", 'Product added to Cart successfully', "successfully", !0);
            }
           // t.error ? sa_alert("Error!", t.message, "error", !0) : (s = t, update_mini_cart(t))
        })



            // $.ajax({
            //     url: site.site_url + "cart/add/" + e,
            //     type: "GET",
            //     dataType: "json",
            //     data: {
            //         qty: a.val()
            //     }
            // }).done(function(t) {
               
            //     console.log(t);
            //     s = t, update_mini_cart(t);
            //      addProductNotice('Product added to Cart1', '<img src="image/demo/shop/product/e11.jpg" alt="">', '<h3>view your <a href="'+ site.base_url +'cart">cart</a>!</h3>', 'success');

            // })

        }), 


        $(document).on("click", ".btn-minus", function(t) {
            var e = $(this).parent().find("input");
            parseInt(e.val()) > 1 && e.val(parseInt(e.val()) - 1)
        }), 
        $(document).on("click", ".guest-checkout", function(t) {
            return console.log(this), $(".nav-tabs a:last").tab("show"), !1
        }), 
        $(document).on("click", ".btn-plus", function(t) {
            var e = $(this).parent().find("input");
            e.val(parseInt(e.val()) + 1)
        }), 
        $(document).on("click", ".add-to-wishlist", function(t) {
            t.preventDefault();
            var e = $(this).attr("data-id");
            $.ajax({
                url: site.site_url + "cart/add_wishlist/" + e,
                type: "GET",
                dataType: "json"
            }).done(function(t) {
                if (t.total) $("#total-wishlist").text(t.total);
                else if (t.redirect) return window.location.href = t.redirect, !1;
                sa_alert(t.status, t.message, t.level)
            })
        }), $(document).on("click", ".remove-wishlist", function(t) {
            t.preventDefault();
            var e = $(this),
                s = $(this).attr("data-id");
            $.ajax({
                url: site.site_url + "cart/remove_wishlist/" + s,
                type: "GET",
                dataType: "json"
            }).done(function(t) {
                if (0 == t.total) setTimeout(function() {
                    location.reload()
                }, 1e3);
                else if (t.redirect) return window.location.href = t.redirect, !1;
                t.status != lang.error && e.closest("tr").remove(), $("#total-wishlist").text(t.total), sa_alert(t.status, t.message, t.level)
            })
        }), update_mini_cart(cart), $("#dropdown-cart").click(function() {
            $(this).next(".dropdown-menu").animate({
                scrollTop: $(this).next(".dropdown-menu").height() + 400
            }, 100)
        }), $("#add-address").click(function(t) {
            t.preventDefault(), add_address()
        }), $(".edit-address").click(function(t) {
            t.preventDefault();
            var e = $(this).attr("data-id");
            addresses && $.each(addresses, function() {
                this.id == e && add_address(this)
            })
        }), $(document).on("click", ".forgot-password", function(t) {
            t.preventDefault(), prompt(lang.reset_pw, lang.type_email)
        }), $("ul.nav li.dropdown").hover(function() {
            get_width() >= 767 && $(this).addClass("open")
        }, function() {
            get_width() >= 767 && $(this).removeClass("open")
        }), $("ul.dropdown-menu [data-toggle=dropdown]").on("click", function(t) {
            t.preventDefault(), t.stopPropagation(), $(this).parent().siblings().removeClass("open"), $(this).parent().toggleClass("open")
        }), $(".tip").tooltip({
            container: "body"
        }), $(".validate").formValidation({
            framework: "bootstrap",
            message: "This value is required or not valid"
        }), $(window).scroll(function() {
            $(this).scrollTop() > 70 ? $(".back-to-top").fadeIn() : $(".back-to-top").fadeOut()
        }), sticky_footer(), $(window).resize(sticky_footer), sticky_con(), $(window).resize(sticky_con), $(".theme-color").click(function(t) {
            return store("shop_color", $(this).attr("data-color")), $("#wrapper").removeAttr("class").addClass($(this).attr("data-color")), !1
        }), (shop_color = get("shop_color")) && $("#wrapper").removeAttr("class").addClass(shop_color), "products" == v && ($(window).resize(function() {
            gen_html(products)
        }), 1 == site.settings.products_page && $(".grid").isotope({
            itemSelector: ".grid-item"
        }), $(".sorting").click(function(t) {
          //  alert('ddd');
            return store("sorting", $(this).attr("id")), $(".sorting").removeClass("active"), $(this).addClass("active"), searchProducts(), !1
        }), $(".two-col").click(function() {
            return store("shop_grid", ".two-col"), $(this).addClass("active"), $(".three-col").removeClass("active"), gen_html(products), !1
        }), $(".three-col").click(function() {
            return store("shop_grid", ".three-col"), $(this).addClass("active"), $(".two-col").removeClass("active"), gen_html(products), !1
        }), $("#product-search-form").submit(function(t) {
            return t.preventDefault(), filters.query = $("#product-search").val(), searchProducts(), !1
        }), $("#product-search").blur(function(t) {
            return t.preventDefault(), filters.query = $(this).val(), searchProducts(), !1
        }), $(".reset_filters_brand").click(function(t) {
            filters.brand = null, searchProducts(), $(this).closest("li").remove()
        }), $(".reset_filters_category").click(function(t) {
            filters.category = null, searchProducts(), $(this).closest("li").remove()
        }), $("#min-price, #max-price, #in-stock").change(function() {
            searchProducts()
        }), $(document).on("click", "#pagination a", function(t) {
            t.preventDefault();
            var e = $(this).attr("href"),
                s = e.split("page=");
            if (s[1]) {
                var a = s[1].split("&");
                filters.page = a[0]
            } else filters.page = 1;
            return searchProducts(), !1
        }), (shop_grid = get("shop_grid")) && $(shop_grid).click(), (sorting = get("sorting")) ? ($(".sorting").removeClass("active"), $("#" + sorting).addClass("active")) : store("sorting", "name-asc"), filters.query && $("#product-search").val(filters.query), searchProducts()), $(".product").each(function(t, e) {
            $(e).find(".details").hover(function() {
                $(this).parent().css("z-index", "20"), $(this).addClass("animate")
            }, function() {
                $(this).removeClass("animate"), $(this).parent().css("z-index", "1")
            })
        }), "cart_ajax" == m && "index" == v) update_mini_cart(cart), update_cart(cart), $(document).on("click", ".remove-item", function(t) {

        t.preventDefault();
        var e = {};
       // alert('remove');
        e.rowid = $(this).attr("data-rowid");
        var s = site.site_url + "cart/remove";
        saa_alert(s, !1, "post", e);
       // window.reload();
    }), $(document).on("change", ".cart-item-option, .cart-item-qty", function(t) {
        t.preventDefault();
        var e = $(this).closest("tr"),
            s = e.attr("id"),
            a = site.site_url + "cart/update",
            i = {};
        i[site.csrf_token] = site.csrf_token_value, i.rowid = s, i.qty = e.find(".cart-item-qty").val(), i.option = e.find(".cart-item-option").children("option:selected").val(), update_cart_item(a, i)
    }), $("#empty-cart").click(function(t) {
        t.preventDefault();
        var e = $(this).attr("href");
        saa_alert(e)
    });
    else if ("shop" == m && "product" == v) {
        var t = $("#lightbox");
        $('[data-target="#lightbox"]').on("click", function(e) {
            var s = $(this).find("img"),
                a = s.attr("src"),
                i = s.attr("alt"),
                o = {
                    maxWidth: $(window).width() - 10,
                    maxHeight: $(window).height() - 10
                };
            t.find(".close").addClass("hidden"), t.find("img").attr("src", a), t.find("img").attr("alt", i), t.find("img").css(o), t.find(".modal-content").removeClass("swal2-hide").addClass("swal2-show")
        }), t.on("shown.bs.modal", function(e) {
            var s = t.find("img");
            t.find(".modal-dialog").css({
                width: s.width()
            }), t.find(".close").removeClass("hidden"), t.addClass("fade"), $(".modal-backdrop").addClass("fade")
        }), t.on("hide.bs.modal", function() {
            t.find(".modal-content").removeClass("swal2-show").addClass("swal2-hide")
        }), t.on("hidden.bs.modal", function() {
            t.removeClass("fade"), $(".modal-backdrop").removeClass("fade")
        })
    }
    var e = document.location.toString();
    e.match("#") && $('.nav-tabs a[href="#' + e.split("#")[1] + '"]').tab("show"), $(document).on("click", ".show-tab", function(t) {
        t.preventDefault(), $('.nav-tabs a[href="#' + $(this).attr("href") + '"]').tab("show")
    }), $(".history-tabs a").on("shown.bs.tab", function(t) {
        history.pushState ? history.pushState(null, null, t.target.hash) : window.location.hash = t.target.hash
    }), $(".email-modal").click(function(t) {
        t.preventDefault(), email_form()
    })
});
var inputs = document.querySelectorAll(".file"),
    submit_btn = document.querySelector("#submit-container");
submit_btn && (submit_btn.style.display = "none"), Array.prototype.forEach.call(inputs, function(t) {
    var e = t.nextElementSibling,
        s = e.innerHTML;
    t.addEventListener("change", function(t) {
        var a = "";
        this.files && this.files.length > 1 ? (a = (this.getAttribute("data-multiple-caption") || "").replace("{count}", this.files.length), submit_btn && (submit_btn.style.display = "inline-block")) : (a = t.target.value.split("\\").pop(), submit_btn && (submit_btn.style.display = "none")), a ? (e.querySelector("span").innerHTML = a, submit_btn && (submit_btn.style.display = "inline-block")) : (e.innerHTML = s, submit_btn && (submit_btn.style.display = "none"))
    })
});